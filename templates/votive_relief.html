<!DOCTYPE html>

<html lang="en">

    <head>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- documentation at http://getbootstrap.com/docs/4.1/, alternative themes at https://bootswatch.com/ -->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">

        <link rel="shortcut icon" href="{{ url_for('static', filename='/gear.ico') }}">

        <link href="/static/styles.css" rel="stylesheet">

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <title>COG</title>

</head>

    </head>
    <br><br><br>
    <body class="background" onload="addInfo()">
            <nav class="navbar navbar-expand-md navbar-light border-bottom fixed-top scrolling-navbar background">
                <a class="navbar-brand" href="/"><span style="color: gray;">COG</span></a>
                <button aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar" data-toggle="collapse" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbar">
                        <ul class="navbar-nav ml-auto mt-2">
                            <li class="nav-item"><a class="nav-link" href="#about">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="#setlist">QR Code Generator</a></li>
                            <li class="nav-item"><a class="nav-link" href="#videos">Other Resources</a></li>
                        </ul>
                </div>
            </nav>

        <div class="vertical-center">
            <main class="container">

                <div class="wid">
                    <a href="#explanation">
                        <h1> Votive Relief of the goddess Nemesis </h1>
                    </a>
                    <div class= "wrapper">
                            <img src={{image}} alt="object1" class="img-fluid">
                            {%for entry in translations%}
                                <a href="#{{entry[0]}}">
                                    <div class="boundingbox" style="left: {{entry[2][0]}}%; top: {{entry[2][1]}}%; padding-right: {{entry[2][2]}}%; padding-bottom: {{entry[2][3]}}%;" id="{{entry[0]}}.pos"></div>
                                </a>
                            {%endfor%}
                            {%for entry in depictions%}
                                <a href="#{{entry[0]}}">
                                    <div class="boundingbox" style="left: {{entry[1][0]}}%; top: {{entry[1][1]}}%; padding-right: {{entry[1][2]}}%; padding-bottom: {{entry[1][3]}}%;" id="{{entry[0]}}.pos"></div>
                                </a>
                            {%endfor%}
                    </div>

                    <label for="colors">If desired, change bounding box outline color:</label>

                    <select name="colors" id="colors">
                        <option value="blue" selected>Blue</option>
                        <option value="silver">Silver</option>
                        <option value="red">Red</option>
                        <option value="black">Black</option>
                    </select>

                    <br>
                    <div>
                        <!-- Loading in data from Flask and using Jinja to put the data onto the page-->
                        <h1>Inscriptions on this Object</h1> <br>
                        {%for entry in translations%}
                            <div id="{{entry[0]}}">
                                <h4> Inscription:</h4>
                                    <text>{{entry[0]}}</text>
                                    <br>
                                <h4>Translation:</h4>
                                    <text>{{entry[1]}}</text>
                                    <br>
                            </div>
                            <a href="#{{entry[0]}}.pos"> 
                                <h4>Location on Image</h4> 
                            </a>
                            <hr style="border-width:5px">    
                        {%endfor%}
                    </div>
                    <br>
                    <br>
                    <br>
                    <div>
                        <h1>Depictions on this Object</h1> <br>
                        {%for entry in depictions%}
                            {% set title = page_titles[loop.index-1] %}
                            <div id="{{entry[0]}}">
                                <h4>Depicts:</h4>
                                    <a href="{{entry[0]}}">{{title}}</a>
                                <a href="#{{entry[0]}}.pos"> 
                                    <h4>Location on Image</h4> 
                                </a>
                            </div>
                            <hr style="border-width:5px">
                        {%endfor%}
                    </div>

                    <a id="explanation">
                        <p> Explaination of what is going on </p>
                    </a>
                    <p>The Location Shown Below is Approximate, calculated from Map Coordinates and Projected onto a Satellite Image of Dura-Europos</p>
                    <div class= "wrapper" onLoad="loadfunc(40.727421, 34.750515)">
                        <img src="http://www.athenapub.com/aria1/_Syria/md_syria-dura-satellite.jpg" alt="map" class="img-fluid">
                        <div id="pinpoint" class= "pinpoint" style= "">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="50" height="50" viewBox="0 0 256 256" xml:space="preserve" >
                                <desc>Created with Fabric.js 1.7.22</desc>
                                <defs>
                                </defs>
                                <g transform="translate(128 128) scale(0.72 0.72)" style="">
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(-175.05 -175.05000000000004) scale(3.89 3.89)" >
                                    <path d="M 45 0 C 25.463 0 9.625 15.838 9.625 35.375 c 0 8.722 3.171 16.693 8.404 22.861 L 45 90 l 26.97 -31.765 c 5.233 -6.167 8.404 -14.139 8.404 -22.861 C 80.375 15.838 64.537 0 45 0 z M 45 48.705 c -8.035 0 -14.548 -6.513 -14.548 -14.548 c 0 -8.035 6.513 -14.548 14.548 -14.548 s 14.548 6.513 14.548 14.548 C 59.548 42.192 53.035 48.705 45 48.705 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                </g>
                                </g>
                                </svg>
                        </div>
                    </div>
                </div>
                <br>
                <br>
                <div class="border-top">
                <br>
                        <p>Contact: <a href="mailto:cog@yale.edu">cog@yale.edu</a></p>
                </div>
            </main>
        </div>
        <button id="btnScrollToTop"> 
            <i class="material-icons">arrow_upward</i>
        </button> 
        <script> 
            const btnScrollToTop = document.querySelector("#btnScrollToTop"); 
            btnScrollToTop.addEventListener("click", function() { 
                $("html, body").animate({scrollTop: 0 }, "slow"); 
            }); 

            document.addEventListener('DOMContentLoaded', function() {
                const xval = (40.727209 * 60321.7158176944) - 2456580;
                const yval = (34.746337 *  -79238.8525986936) + 2753796.232036354943122;
                const xpercent = (xval / 703) * 100;
                const ypercent = (yval / 800) * 100;
                const xpercentstring = xpercent.toString() + '%';
                const ypercentstring = ypercent.toString() + '%';
                $('.pinpoint').css("top", ypercentstring);
                $('.pinpoint').css("left", xpercentstring); 
            }, false);
            
            $("#colors").change(function(){
                let color = $("#colors").val();
                $('.boundingbox').css("border", "solid " + color);
                $('path').css("fill", color);
            });

            function addInfo() {
                
            }

        </script>
    </body>

</html>